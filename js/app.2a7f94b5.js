(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],p=0,y=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&y.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(y.length)y.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0d7c":function(t,e,n){"use strict";n("409b")},"18a4":function(t,e,n){},"19a9":function(t,e,n){t.exports=n.p+"d37b7734ed72d45fe229d7ae37cdf5a2.glb"},"1e50":function(t,e,n){t.exports=n.p+"2d45e147016046e0387662534bb962a7.glb"},"212a":function(t,e,n){t.exports=n.p+"4a29f69fa04ed93c899ab42f6df28645.glb"},"2a2b":function(t,e,n){t.exports=n.p+"2fa35e1a4327abd486da92c817722352.glb"},"3b1b":function(t,e,n){t.exports=n.p+"b25dfdef9c2021e6d14b8ee550902220.glb"},"409b":function(t,e,n){},5435:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-dark",attrs:{id:"app"}},[n("div",{staticClass:"container-fluid vh-100"},[n("div",{staticClass:"row vh-5 border border-primary"},[n("state-panel")],1),n("div",{staticClass:"row vh-70 border border-secondary "},[n("div",{staticClass:"col-9 px-0"},[n("World")],1),n("div",{staticClass:"col-3 border border-warrning"})]),n("div",{staticClass:"row vh-25 border border-info"},[n("div",{staticClass:"col-1 h-100 border border-danger"}),n("div",{staticClass:"col-8 px-0"},[n("Console")],1),n("div",{staticClass:"col-3 border border-warrning"})])]),t.loaderVisible?n("logo"):t._e()],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"hello",staticClass:"hello"})},s=[],c={name:"World",mounted:function(){this.$store.dispatch("setCanvasAction",this.$refs.hello)}},l=c,u=(n("7f10"),n("2877")),p=Object(u["a"])(l,r,s,!1,null,"72f8f4f7",null),y=p.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-3 text-white fs-3"},[t._v(t._s(t.coords))]),n("div",{staticClass:"col-3 text-white fs-3"},[t._v("M: "+t._s(t.moves)+"/32")]),n("div",{staticClass:"col text-white"},[t._v(t._s(t.camera))])])},h=[],m=(n("99af"),n("b680"),n("e9c4"),{computed:{coords:function(){if(!this.$store.getters.hero)return 0;var t=this.$store.getters.hero.coord.x,e=this.$store.getters.hero.coord.y,n=this.$store.getters.hero.coord.side;return"X: ".concat(t.toFixed(0)," Y: ").concat(e.toFixed(0)," Z: ").concat(n.toFixed())},moves:function(){return 0},camera:function(){if(!this.$store.getters.camera)return 0;var t=this.$store.getters.camera.position,e=this.$store.getters.camera.rotation;return JSON.stringify({x:t.x.toFixed(2),y:t.y.toFixed(2),z:t.z.toFixed(2),xx:(e.x/Math.PI*180).toFixed(2),yy:(e.y/Math.PI*180).toFixed(2),zz:(e.z/Math.PI*180).toFixed(2)})}}}),f=m,x=Object(u["a"])(f,d,h,!1,null,null,null),g=x.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row h-100 justify-content-bottom"},[n("div",{staticClass:"col-12 h-75"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.log,expression:"log"}],ref:"textarea",staticClass:"form-control h-100 text-warning bg-dark fs-4",staticStyle:{"overflow-y":"auto"},attrs:{id:"exampleFormControlTextarea1",readonly:"",rows:"4"},domProps:{value:t.log},on:{input:function(e){e.target.composing||(t.log=e.target.value)}}})]),n("div",{staticClass:"col-12 d-flex pa-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.command,expression:"command"}],staticClass:"form-control text-warning bg-dark fs-4",attrs:{type:"text",placeholder:"Type your command...","aria-label":"Type command"},domProps:{value:t.command},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handle.apply(null,arguments)},input:function(e){e.target.composing||(t.command=e.target.value)}}}),n("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:t.moveLock},on:{click:t.handle}},[t._v("Enter")])])])},b=[],w={data:function(){return{command:"",log:""}},computed:{moveLock:function(){return!1}},methods:{handle:function(){if(!this.moveLock){switch(this.command){case"left()":this.handleLeft();break;case"right()":this.handleRight();break;case"goto w":this.handleUp();break;case"down()":this.handleDown();break;case"rotate left":this.handleRotate(1);break;case"rotate right":this.handleRotate(-1);break;default:this.handleError(this.command)}this.command=""}},handleLeft:function(){this.$store.dispatch("moveLeft"),this.addTextToLog("left()")},handleRight:function(){this.$store.dispatch("moveRight"),this.addTextToLog("right()")},handleDown:function(){this.$store.dispatch("moveDown"),this.addTextToLog("down()")},handleUp:function(){this.$store.dispatch("heroMoveAction"),this.addTextToLog("goto w")},handleRotate:function(t){this.$store.dispatch("heroRotateAction",t),this.addTextToLog("rotate ".concat(1==t?"left":"right"))},handleError:function(t){this.addTextToLog("Команда "+t+" не существует")},addTextToLog:function(t){this.log+="\t > "+t+"\n";var e=this.$refs.textarea;e.selectionStart==e.selectionEnd&&(e.scrollTop=e.scrollHeight)}}},M=w,S=Object(u["a"])(M,v,b,!1,null,null,null),C=S.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlay-container d-flex flex-column justify-content-center align-items-center"},[t._m(0),n("logo-hex")],1)},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("span",{staticStyle:{color:"red"}},[t._v("J")]),t._v("PLANET")])}],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",viewBox:"0 0 100 100",version:"1.1",width:"250"}},[n("path",{staticStyle:{opacity:"1",fill:"#ff4a2a","fill-opacity":"1",stroke:"#000000","stroke-width":"0.1","stroke-opacity":"1"},attrs:{id:"path817",d:"M \n\t\t\t22.35,31.5\n\t\t\t22.35,56.5\n\t\t\t44,69\n\t\t\t65.65,56.5\n\t\t\t65.65,31.5\n\t\t\t44,19 Z",transform:t.rotateBack}}),n("path",{staticStyle:{opacity:"1",fill:"#ff0000","fill-opacity":"1",stroke:"#000000","stroke-width":"0.1","stroke-opacity":"1"},attrs:{id:"path817",d:"M \n\t\t\t22.35,31.5\n\t\t\t22.35,56.5\n\t\t\t44,69\n\t\t\t65.65,56.5\n\t\t\t65.65,31.5\n\t\t\t44,19 Z",transform:t.rotate}}),n("text",{attrs:{x:"35",y:"48"}},[t._v(t._s(t.progress.toFixed()+"%"))])])},k=[],P={data:function(){return{angle:45,angleBack:0}},computed:{rotate:function(){return"rotate(".concat(this.angle," 44 44)")},rotateBack:function(){return"rotate(".concat(this.angleBack," 44 44)")},progress:function(){return this.$store.getters.loaderProgress}},mounted:function(){var t=this;setInterval((function(){t.angle=(t.angle+4)%360,t.angleBack=(t.angleBack-7)%360}),25)}},N=P,T=(n("0d7c"),Object(u["a"])(N,A,k,!1,null,"f2403efe",null)),_=T.exports,V={components:{LogoHex:_}},I=V,O=(n("c6e5"),Object(u["a"])(I,D,z,!1,null,"06aeb5f4",null)),R=O.exports,F={name:"App",components:{World:y,StatePanel:g,Console:C,Logo:R},computed:{loaderVisible:function(){return this.$store.getters.loaderVisible}},mounted:function(){this.$store.dispatch("loadMaterials")}},L=F,$=(n("034f"),Object(u["a"])(L,o,i,!1,null,null,null)),j=$.exports,E=n("2f62"),B=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("5db7"),n("73d9"),n("5a89")),G=0,H=Math.PI/3,U=2*Math.PI/3,J=Math.PI,W=4*Math.PI/3,Y=5*Math.PI/3,q=[G,H,U,J,W,Y];function Q(t,e){for(var n=0,a=0;a<q.length;a++)Math.abs(q[a]-t)<.001&&(n=a);return n+e>5?n=0:n+e<0?n=5:n+=e,q[n]}var Z=10,X=Z*Math.sqrt(3)/2;function K(t,e){var n={color1:{type:"c",value:new B["j"](8411966)},color2:{type:"c",value:new B["j"](8149309)}},a="\n\t\t\t#include <common>\n\n\t\t\tuniform vec3 iResolution;\n\t\t\tuniform float iTime;\n\t\t\tuniform vec3 color1;\n\t\t\tuniform vec3 color2;\n\t\t\tvarying vec2 vUv;\n\t\t\tfloat random (vec2 st) {\n\t\t\t\treturn fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n\t\t\t}\n\n\t\t\tvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\t\t\t\t\n\t\t\t\t//vec3 cl = mix(color2, color1, sqrt((vUv.y*vUv.y)+(vUv.x*vUv.x))/75.0);\n\t\t\t\tvec3 cl = mix(color2, color1, vUv.x);\n\t\t\t\tvec3 res = vec3(cl.x+sin(random(vUv))*0.2, cl.y+sin(random(vUv))*0.2, cl.z+cos(random(vUv))*0.2);\n\t\t\t\tfragColor = vec4(res, 1.0);\n\t\t\t}\n\t\t\tvoid main() {\n\t\t\t\tmainImage(gl_FragColor, gl_FragCoord.xy);\n\t\t\t}\n\t\t",o="\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n\t\t\t}\n\t\t",i=new B["kb"]({uniforms:n,fragmentShader:a,vertexShader:o,side:B["l"]}),r=new B["g"](10,6,Math.PI/6),s=new B["M"](r,i);s.rotation.set(Math.PI/2,0,0);var c=new B["ib"](10,9.9,6,1,Math.PI/6),l=new B["N"]({color:15110400,side:B["l"],opacity:.25,transparent:!0}),u=new B["M"](c,l);u.rotation.set(Math.PI/2,0,0),u.position.set(0,.1,0),u.renderOrder=200;var p=new B["q"];p.add(s),p.add(u);var y=t.clone();return p.add(y),y.rotation.set(0,e,0),{getGroup:function(){return p},getGroupId:function(){return p.uuid},getMesh:function(){return s},select:function(){u.material.color.setHex(16711680),u.material.transparent=!1},unselect:function(){u.material.color.setHex(15110400),u.material.transparent=!0},rotate:function(t,e){console.log(Q(y.rotation.y,e)),y.rotation.set(0,Q(y.rotation.y,e),0),t.theta=y.rotation.y},changeModel:function(t){var e=t.clone();e.rotation.set(0,y.rotation.y,0),p.remove(y),p.add(e),y=e}}}var tt={state:function(){return{mapSize:{},cells:[],cellByGroupIdMap:new Map,selectedCell:null}},mutations:{addCell:function(t,e){var n=e.x,a=e.y;t.cells[n]||(t.cells[n]=[]),t.cells[n][a]=e,t.cellByGroupIdMap.set(e.getGroupId(),e)},setMapSize:function(t,e){t.mapSize={width:+e.width,height:+e.height}},setSelectedCell:function(t,e){t.selectedCell=e},clearState:function(t){t.cells=[],t.mapSize={},t.cellByGroupIdMap=new Map,t.selectedCell=null}},actions:{buildMapAction:function(t){for(var e=t.commit,n=t.getters,a=t.dispatch,o=Z,i=X,r=n.getFromMapFile("mapSize"),s=r.width,c=r.height,l=n.getFromMapFile("cells"),u=0;u<l.length;u++){var p=l[u].x,y=l[u].y,d=l[u].type,h=n.getModelByName(d),m=l[u].theta,f=K(h,m);a("addToSceneAction",f.getGroup()),f.x=p,f.y=y,f.theta=m,f.type=d;var x=2*(y+.5*p-Math.round(p/2))*i,g=0,v=1.5*p*o;f.position={x:x,y:g,z:v},f.getGroup().position.set(x,g,v),e("addCell",f)}e("setMapSize",{width:s,height:c}),a("readyRendererAction")},buildMapFromJSONAction:function(t,e){var n=t.commit,a=t.getters,o=t.dispatch,i=Z,r=X;console.log(e);for(var s=e.mapSize,c=s.width,l=s.height,u=e.cells,p=0;p<u.length;p++){var y=u[p].x,d=u[p].y,h=u[p].type,m=a.getModelByName(h),f=u[p].theta,x=K(m,f);o("addToSceneAction",x.getGroup()),x.x=y,x.y=d,x.theta=f,x.type=h,n("addCell",x),x.getGroup().position.set(2*(d+.5*y-Math.round(y/2))*r,0,1.5*y*i)}n("setMapSize",{width:c,height:l}),o("readyRendererAction")},destroyMapAction:function(t){var e=t.commit;return new Promise((function(t){e("clearState"),t()}))},rotateSelectedCellAction:function(t,e){var n=t.getters;n.selectedCell.rotate(n.selectedCell,e)},changeTypeSelectedCellAction:function(t,e){var n=t.getters;n.selectedCell.changeModel(n.getModelByName(e)),n.selectedCell.type=e}},getters:{cellsToJSON:function(t){return t.cells.flatMap((function(t){return t}))},mapSize:function(t){return t.mapSize},cells:function(t){return t.cells},getCellByGroupId:function(t){return function(e){return t.cellByGroupIdMap.get(e)}},selectedCell:function(t){return t.selectedCell}}},et=(n("159b"),n("a434"),n("d81d"),n("0481"),n("4069"),{createRenderer:function(t){var e=new B["zb"]({antialias:!0});return e.setSize(t.clientWidth,t.clientHeight),t.appendChild(e.domElement),{getRenderer:function(){return e},getDomElenent:function(){return e.domElement},render:function(t,n){e.render(t,n)},setRaycastListener:function(t,n){var a=t.cells.flat().map((function(t){return t.getMesh()}));e.domElement.addEventListener("click",(function(e){var o=new B["wb"];o.x=e.clientX/t.resolution.width*2-1,o.y=-(e.clientY-64)/t.resolution.height*2+1;var i=new B["gb"];i.setFromCamera(o,t.camera);var r=i.intersectObjects(a,!1);console.log(r),r.length>0?n(t.getCellByGroupId(r[0].object.parent.uuid)):n()}))}}}}),nt={state:function(){return{canvas:null,resolution:{},renderer:null,updatables:[]}},mutations:{initRenderer:function(t){t.resolution.height=t.canvas.clientHeight,t.resolution.width=t.canvas.clientWidth,t.renderer=et.createRenderer(t.canvas)},setCanvas:function(t,e){t.canvas=e}},actions:{setCanvasAction:function(t,e){var n=t.commit;n("setCanvas",e)},initRendererAction:function(t){var e=t.commit,n=t.dispatch;e("initRenderer"),n("initCameraAction")},readyRendererAction:function(t){var e=t.getters,n=t.commit;e.renderer.setRaycastListener(e,(function(t){t?e.selectedCell!=t&&(e.selectedCell&&e.selectedCell.unselect(),t.select(),n("setSelectedCell",t)):(e.selectedCell&&e.selectedCell.unselect(),n("setSelectedCell",null))}));var a=function t(){e.updatables.forEach((function(t){return t()})),requestAnimationFrame(t),e.renderer.render(e.scene,e.camera)};a(),e.camera.position.set(36,15,32),e.camera.rotation.set(-148/180*Math.PI,-24/180*Math.PI,-165/180*Math.PI),console.log(e.camera)},heroMoveAction:function(t){var e=t.getters,n=e.hero.position,a=e.hero.coord.x%2!=0?[{x:0,z:1},{x:1,z:0},{x:1,z:1},{x:0,z:-1},{x:-1,z:-1},{x:-1,z:0}]:[{x:0,z:1},{x:1,z:1},{x:1,z:0},{x:0,z:-1},{x:-1,z:0},{x:-1,z:1}],o=a[e.hero.coord.side];console.log("before",o,e.hero.coord);var i=e.cells[e.hero.coord.x+o.x][e.hero.coord.y+o.z].position,r=new B["yb"](".position",[0,5],[n.x,n.y,n.z,i.x,i.y,i.z]),s=new B["a"]("move-n-blink",5,[r]),c=new B["b"](e.hero),l=c.clipAction(s);l.loop=B["H"],l.clampWhenFinished=!0,l.play();var u=new B["i"];e.updatables.push((function(){var t=u.getDelta();c.update(t)}));var p=new B["i"],y=e.hero.children[0].animations,d=new B["b"](e.hero.children[0]);y.forEach((function(t){d.clipAction(t).play()})),e.updatables.push((function(){var t=p.getDelta();d.update(t)}));var h=e.camera.position,m=new B["yb"](".position",[0,5],[h.x,h.y,h.z,h.x+(i.x-n.x),h.y,h.z+(i.z-n.z)]),f=new B["a"]("move-camera",5,[m]),x=new B["b"](e.camera),g=x.clipAction(f);g.loop=B["H"],g.clampWhenFinished=!0,g.play();var v=new B["i"];e.updatables.push((function(){var t=v.getDelta();x.update(t)})),e.updatables.push((function(){l.isRunning()||(e.updatables.splice(0),e.hero.coord.x+=o.x,e.hero.coord.y+=o.z,console.log("after",e.hero.coord))}))},heroRotateAction:function(t,e){var n=t.getters,a=n.hero.rotation,o=new B["yb"](".rotation[y]",[0,2],[a.y,a.y+e*Math.PI/3]);n.hero.coord.side-=e,6==n.hero.coord.side&&(n.hero.coord.side=0),-1==n.hero.coord.side&&(n.hero.coord.side=5);var i=new B["a"]("rotation-hero",2,[o]),r=new B["b"](n.hero),s=r.clipAction(i);s.loop=B["H"],s.clampWhenFinished=!0,s.play();var c=new B["i"];n.updatables.push((function(){var t=c.getDelta();r.update(t)}));var l=n.hero.position,u=n.camera.position,p=(u.x-l.x)*Math.cos(e*Math.PI/3)+(u.z-l.z)*Math.sin(e*Math.PI/3)+l.x,y=-(u.x-l.x)*Math.sin(e*Math.PI/3)+(u.z-l.z)*Math.cos(e*Math.PI/3)+l.z,d=new B["yb"](".position",[0,2],[u.x,u.y,u.z,p,u.y,y]),h=new B["a"]("move-camera",2,[d]),m=new B["b"](n.camera),f=m.clipAction(h);f.loop=B["H"],f.clampWhenFinished=!0,f.play();var x=new B["i"];n.updatables.push((function(){var t=x.getDelta();m.update(t),n.camera.lookAt(l.x,7,l.z)})),s.isRunning()||n.updatables.splice(0),n.updatables.push((function(){s.isRunning()||f.isRunning()||(n.updatables.splice(0),n.camera.lookAt(l.x,7,l.z))}))}},getters:{resolution:function(t){return t.resolution},renderer:function(t){return t.renderer},updatables:function(t){return t.updatables}}},at=n("4721"),ot={createCamera:function(t){var e=t.width,n=t.height,a=new B["X"](45,e/n,1,4e3);return a.position.set(90,90,150),a.rotation.set(Math.PI/2,0,Math.PI),a},createControls:function(t,e){return new at["a"](t,e)}},it={state:function(){return{camera:null}},mutations:{setCamera:function(t,e){t.camera=ot.createCamera(e)}},actions:{initCameraAction:function(t){var e=t.commit,n=t.getters,a=t.dispatch;e("setCamera",n.resolution),a("initCameraControlsAction")}},getters:{camera:function(t){return t.camera}}},rt={createScene:function(){var t=new B["jb"];return t.background=new B["j"](0),t.fog=new B["o"](16777215,1e3,7500),t}},st={createPointGridLight:function(){for(var t=new B["q"],e=0;e<6;e++)for(var n=0;n<4;n++){var a=new B["Y"](4210752,.75),o=new B["Z"](a,5);o.position.set(50*e,60,70*n),a.position.set(50*e-10,60,70*n-10),t.add(o),t.add(a)}return t},createDirectionalLight:function(){var t=new B["r"](16777147,8149309,4);return t.position.set(1500,500,1500),t}},ct={state:function(){return{scene:null}},mutations:{setScene:function(t){t.scene=rt.createScene()},addToScene:function(t,e){t.scene.add(e)},clearScene:function(t){t.scene.clear()}},actions:{initSceneAction:function(t){var e=t.commit,n=t.dispatch,a=t.getters;e("setScene"),e("addToScene",st.createPointGridLight()),e("addToScene",a.hero),n("buildMapAction")},addToSceneAction:function(t,e){var n=t.commit;n("addToScene",e)},addToSceneLightAction:function(t){var e=t.commit;e("addToScene",st.createPointGridLight())},addHeroToSceneAction:function(t){var e=t.commit,n=t.getters;e("addToScene",n.hero)},clearSceneAction:function(t){var e=t.commit;e("clearScene")}},getters:{scene:function(t){return t.scene}}},lt={state:function(){return{cameraControls:null}},mutations:{setCameraControls:function(t,e){t.cameraControls=e}},actions:{initCameraControlsAction:function(t){var e=t.dispatch;e("initSceneAction")}},getters:{cameraControls:function(t){return t.cameraControls}}},ut={state:function(){return{newMapDialogVisible:!1,saveMapDialogVisible:!1,saveMapDialogResolver:"",yesNoDialogVisible:!1,yesNoDialogQuestion:"",yesNoDialogResolver:"",lastOpenDialog:""}},mutations:{setNewMapDialogVisible:function(t,e){t.newMapDialogVisible=e},setSaveMapDialogVisible:function(t,e){t.saveMapDialogVisible=e},setSaveMapDialogState:function(t,e){t.newMapDialogVisible&&(t.lastOpenDialog="newMapDialogVisible",t.newMapDialogVisible=!1),t.saveMapDialogVisible=!0,t.saveMapDialogResolver=e},setYesNoDialogState:function(t,e){t.newMapDialogVisible&&(t.lastOpenDialog="newMapDialogVisible",t.newMapDialogVisible=!1),t.yesNoDialogVisible=!0,t.yesNoDialogQuestion=e.question,t.yesNoDialogResolver=e.resolve},clearSaveMapDialogState:function(t){t.saveMapDialogVisible=!1,t.saveMapDialogResolver="",t.lastOpenDialog&&(t[t.lastOpenDialog]=!0)},clearYesNoDialogState:function(t){t.yesNoDialogVisible=!1,t.yesNoDialogQuestion="",t.yesNoDialogResolver="",t.lastOpenDialog&&(t[t.lastOpenDialog]=!0)}},actions:{toggleNewMapDialogAction:function(t){var e=t.commit,n=t.getters;e("setNewMapDialogVisible",!n.newMapDialogVisible)},closeNewMapDialogVisible:function(t){var e=t.commit;e("setNewMapDialogVisible",!1)},initSaveMapAction:function(t){var e=t.commit;return new Promise((function(t){e("setSaveMapDialogState",t)}))},saveMapDialogAction:function(t){var e=t.commit,n=t.state,a=n.saveMapDialogResolver;e("clearSaveMapDialogState"),a()},closeSaveMapDialog:function(t){var e=t.commit;e("setSaveMapDialogVisible",!1)},initYesNoDialog:function(t,e){var n=t.commit;return new Promise((function(t){e.resolve=t,n("setYesNoDialogState",e)}))},yesNoDialogAction:function(t,e){var n=t.commit,a=t.state,o=a.yesNoDialogResolver;n("clearYesNoDialogState"),o(e)},openMapDialogAction:function(t){var e=t.dispatch,n=document.createElement("input");n.setAttribute("type","file"),n.click(),n.addEventListener("input",(function(t){t.target.files[0].text().then((function(t){e("clearSceneAction"),e("destroyMapAction"),e("addToSceneLightAction"),e("buildMapFromJSONAction",JSON.parse(t))}))}))}},getters:{newMapDialogVisible:function(t){return t.newMapDialogVisible},saveMapDialogVisible:function(t){return t.saveMapDialogVisible},yesNoDialogVisible:function(t){return t.yesNoDialogVisible},yesNoDialogQuestion:function(t){return t.yesNoDialogQuestion}}},pt=(n("b0c0"),n("34ad")),yt={load:function(t,e,n){var a=new pt["a"];a.loadAsync(t,n).then((function(t){var n=t.scene;t.animations&&(n.children[0].animations=t.animations),n.scale.set(10,10,10),n.position.set(0,0,0),e(n)}))}},dt="grass",ht="stone",mt="tile",ft="ground",xt="midStone",gt="bushes",vt="mountain",bt="trees",wt="house",Mt="office",St="school",Ct="market",Dt={};Dt[dt]=n("19a9"),Dt[ht]=n("b051"),Dt[mt]=n("9a1b"),Dt[ft]=n("2a2b"),Dt[xt]=n("c550"),Dt[gt]=n("1e50"),Dt[vt]=n("e716"),Dt[bt]=n("f4e8"),Dt[wt]=n("212a"),Dt[Mt]=n("e19c"),Dt[St]=n("3b1b"),Dt[Ct]=n("6f0e");var zt=n("8193");var At={state:function(){return{models:{},loaded:0,hero:null,visible:!0,progress:0}},mutations:{setModel:function(t,e){var n=e.name,a=e.value;t.models[n]=a,t.loaded++,t.progress=t.loaded/13*100},setHero:function(t,e){t.hero=e,t.loaded++,t.progress=100},setVisible:function(t,e){t.visible=e}},actions:{loadMaterials:function(t){var e=t.commit,n=t.dispatch,a=t.state;return new Promise((function(t){var o=function(o){yt.load(Dt[o],(function(i){e("setModel",{name:o,value:i}),12==a.loaded&&yt.load(zt,(function(a){a.scale.set(2,2,2),a.position.set(43.5,0,45),a.coord={x:3,y:3,side:1},a.rotation.set(0,Math.PI/6,0),e("setHero",a),e("setVisible",!1),n("initRendererAction"),t()}))}))};for(var i in Dt)o(i)}))}},getters:{getModelByName:function(t){return function(e){return t.models[e]}},hero:function(t){return t.hero},loaderVisible:function(t){return t.visible},loaderProgress:function(t){return t.progress}}},kt={state:function(){return{}},mutations:{},actions:{},getters:{}},Pt=n("c225"),Nt={state:function(){return{cells:Pt.cells,mapSize:Pt.mapSize,heroCoords:{x:4,y:4,theta:0}}},mutations:{},actions:{},getters:{getFromMapFile:function(t){return function(e){return t[e]}}}};a["a"].use(E["a"]);var Tt=new E["a"].Store({modules:{Map:tt,Engine:nt,Camera:it,Scene:ct,CameraControls:lt,ModalDialog:ut,Materials:At,Hero:kt,File:Nt}});a["a"].config.productionTip=!1,new a["a"]({store:Tt,render:function(t){return t(j)}}).$mount("#app")},"6f0e":function(t,e,n){t.exports=n.p+"b02610a0146e6b1029d0973d3d005492.glb"},"7f10":function(t,e,n){"use strict";n("18a4")},8193:function(t,e,n){t.exports=n.p+"4972642558e527315e98542a67994e22.glb"},"85ec":function(t,e,n){},"9a1b":function(t,e,n){t.exports=n.p+"ac1e04bf377e65105815b1f9cbac9cbf.glb"},b051:function(t,e,n){t.exports=n.p+"518b5a7d453b98793da25e07ad757522.glb"},c225:function(t){t.exports=JSON.parse('{"mapSize":{"width":15,"height":"13"},"cells":[{"x":0,"y":0,"theta":5.235987755982989,"type":"mountain"},{"x":0,"y":1,"theta":4.1887902047863905,"type":"mountain"},{"x":0,"y":2,"theta":3.141592653589793,"type":"mountain"},{"x":0,"y":3,"theta":4.1887902047863905,"type":"mountain"},{"x":0,"y":4,"theta":0,"type":"mountain"},{"x":0,"y":5,"theta":1.0471975511965976,"type":"mountain"},{"x":0,"y":6,"theta":3.141592653589793,"type":"mountain"},{"x":0,"y":7,"theta":0,"type":"mountain"},{"x":0,"y":8,"theta":0,"type":"mountain"},{"x":0,"y":9,"theta":1.0471975511965976,"type":"mountain"},{"x":0,"y":10,"theta":0,"type":"mountain"},{"x":0,"y":11,"theta":5.235987755982989,"type":"mountain"},{"x":0,"y":12,"theta":5.235987755982989,"type":"mountain"},{"x":1,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":1,"y":1,"theta":1.0471975511965976,"type":"tile"},{"x":1,"y":2,"theta":4.1887902047863905,"type":"mountain"},{"x":1,"y":3,"theta":2.0943951023931953,"type":"mountain"},{"x":1,"y":4,"theta":1.0471975511965976,"type":"midStone"},{"x":1,"y":5,"theta":4.1887902047863905,"type":"ground"},{"x":1,"y":6,"theta":2.0943951023931953,"type":"mountain"},{"x":1,"y":7,"theta":3.141592653589793,"type":"tile"},{"x":1,"y":8,"theta":5.235987755982989,"type":"tile"},{"x":1,"y":9,"theta":1.0471975511965976,"type":"stone"},{"x":1,"y":10,"theta":3.141592653589793,"type":"tile"},{"x":1,"y":11,"theta":2.0943951023931953,"type":"midStone"},{"x":1,"y":12,"theta":3.141592653589793,"type":"mountain"},{"x":2,"y":0,"theta":5.235987755982989,"type":"mountain"},{"x":2,"y":1,"theta":5.235987755982989,"type":"mountain"},{"x":2,"y":2,"theta":1.0471975511965976,"type":"midStone"},{"x":2,"y":3,"theta":2.0943951023931953,"type":"bushes"},{"x":2,"y":4,"theta":1.0471975511965976,"type":"tile"},{"x":2,"y":5,"theta":4.1887902047863905,"type":"ground"},{"x":2,"y":6,"theta":3.141592653589793,"type":"midStone"},{"x":2,"y":7,"theta":1.0471975511965976,"type":"stone"},{"x":2,"y":8,"theta":3.141592653589793,"type":"midStone"},{"x":2,"y":9,"theta":1.0471975511965976,"type":"tile"},{"x":2,"y":10,"theta":0,"type":"stone"},{"x":2,"y":11,"theta":2.0943951023931953,"type":"grass"},{"x":2,"y":12,"theta":1.0471975511965976,"type":"mountain"},{"x":3,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":3,"y":1,"theta":2.0943951023931953,"type":"grass"},{"x":3,"y":2,"theta":5.235987755982989,"type":"trees"},{"x":3,"y":3,"theta":2.0943951023931953,"type":"tile"},{"x":3,"y":4,"theta":2.0943951023931953,"type":"bushes"},{"x":3,"y":5,"theta":2.0943951023931953,"type":"mountain"},{"x":3,"y":6,"theta":1.0471975511965976,"type":"trees"},{"x":3,"y":7,"theta":1.0471975511965976,"type":"grass"},{"x":3,"y":8,"theta":3.141592653589793,"type":"bushes"},{"x":3,"y":9,"theta":5.235987755982989,"type":"bushes"},{"x":3,"y":10,"theta":3.141592653589793,"type":"bushes"},{"x":3,"y":11,"theta":3.141592653589793,"type":"ground"},{"x":3,"y":12,"theta":4.1887902047863905,"type":"mountain"},{"x":4,"y":0,"theta":3.141592653589793,"type":"mountain"},{"x":4,"y":1,"theta":0,"type":"bushes"},{"x":4,"y":2,"theta":0,"type":"bushes"},{"x":4,"y":3,"theta":2.0943951023931953,"type":"grass"},{"x":4,"y":4,"theta":5.235987755982989,"type":"midStone"},{"x":4,"y":5,"theta":2.0943951023931953,"type":"ground"},{"x":4,"y":6,"theta":5.235987755982989,"type":"ground"},{"x":4,"y":7,"theta":4.1887902047863905,"type":"stone"},{"x":4,"y":8,"theta":4.1887902047863905,"type":"mountain"},{"x":4,"y":9,"theta":1.0471975511965976,"type":"midStone"},{"x":4,"y":10,"theta":3.141592653589793,"type":"bushes"},{"x":4,"y":11,"theta":3.141592653589793,"type":"stone"},{"x":4,"y":12,"theta":3.141592653589793,"type":"mountain"},{"x":5,"y":0,"theta":5.235987755982989,"type":"mountain"},{"x":5,"y":1,"theta":5.235987755982989,"type":"midStone"},{"x":5,"y":2,"theta":2.0943951023931953,"type":"tile"},{"x":5,"y":3,"theta":2.0943951023931953,"type":"midStone"},{"x":5,"y":4,"theta":3.141592653589793,"type":"tile"},{"x":5,"y":5,"theta":2.0943951023931953,"type":"midStone"},{"x":5,"y":6,"theta":3.141592653589793,"type":"midStone"},{"x":5,"y":7,"theta":3.141592653589793,"type":"stone"},{"x":5,"y":8,"theta":3.141592653589793,"type":"bushes"},{"x":5,"y":9,"theta":4.1887902047863905,"type":"midStone"},{"x":5,"y":10,"theta":4.1887902047863905,"type":"trees"},{"x":5,"y":11,"theta":0,"type":"grass"},{"x":5,"y":12,"theta":4.1887902047863905,"type":"mountain"},{"x":6,"y":0,"theta":4.1887902047863905,"type":"mountain"},{"x":6,"y":1,"theta":0,"type":"bushes"},{"x":6,"y":2,"theta":2.0943951023931953,"type":"ground"},{"x":6,"y":3,"theta":4.1887902047863905,"type":"trees"},{"x":6,"y":4,"theta":3.141592653589793,"type":"tile"},{"x":6,"y":5,"theta":0,"type":"stone"},{"x":6,"y":6,"theta":5.235987755982989,"type":"ground"},{"x":6,"y":7,"theta":2.0943951023931953,"type":"tile"},{"x":6,"y":8,"theta":4.1887902047863905,"type":"ground"},{"x":6,"y":9,"theta":5.235987755982989,"type":"stone"},{"x":6,"y":10,"theta":0,"type":"midStone"},{"x":6,"y":11,"theta":2.0943951023931953,"type":"bushes"},{"x":6,"y":12,"theta":2.0943951023931953,"type":"mountain"},{"x":7,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":7,"y":1,"theta":4.1887902047863905,"type":"bushes"},{"x":7,"y":2,"theta":1.0471975511965976,"type":"trees"},{"x":7,"y":3,"theta":1.0471975511965976,"type":"midStone"},{"x":7,"y":4,"theta":5.235987755982989,"type":"mountain"},{"x":7,"y":5,"theta":2.0943951023931953,"type":"tile"},{"x":7,"y":6,"theta":4.1887902047863905,"type":"ground"},{"x":7,"y":7,"theta":1.0471975511965976,"type":"midStone"},{"x":7,"y":8,"theta":3.141592653589793,"type":"mountain"},{"x":7,"y":9,"theta":4.1887902047863905,"type":"stone"},{"x":7,"y":10,"theta":1.0471975511965976,"type":"ground"},{"x":7,"y":11,"theta":2.0943951023931953,"type":"stone"},{"x":7,"y":12,"theta":3.141592653589793,"type":"mountain"},{"x":8,"y":0,"theta":0,"type":"mountain"},{"x":8,"y":1,"theta":1.0471975511965976,"type":"ground"},{"x":8,"y":2,"theta":2.0943951023931953,"type":"midStone"},{"x":8,"y":3,"theta":4.1887902047863905,"type":"bushes"},{"x":8,"y":4,"theta":3.141592653589793,"type":"stone"},{"x":8,"y":5,"theta":3.141592653589793,"type":"grass"},{"x":8,"y":6,"theta":2.0943951023931953,"type":"bushes"},{"x":8,"y":7,"theta":0,"type":"midStone"},{"x":8,"y":8,"theta":5.235987755982989,"type":"mountain"},{"x":8,"y":9,"theta":0,"type":"midStone"},{"x":8,"y":10,"theta":4.1887902047863905,"type":"stone"},{"x":8,"y":11,"theta":4.1887902047863905,"type":"stone"},{"x":8,"y":12,"theta":0,"type":"mountain"},{"x":9,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":9,"y":1,"theta":4.1887902047863905,"type":"tile"},{"x":9,"y":2,"theta":4.1887902047863905,"type":"mountain"},{"x":9,"y":3,"theta":2.0943951023931953,"type":"tile"},{"x":9,"y":4,"theta":5.235987755982989,"type":"mountain"},{"x":9,"y":5,"theta":5.235987755982989,"type":"mountain"},{"x":9,"y":6,"theta":1.0471975511965976,"type":"stone"},{"x":9,"y":7,"theta":1.0471975511965976,"type":"bushes"},{"x":9,"y":8,"theta":3.141592653589793,"type":"stone"},{"x":9,"y":9,"theta":2.0943951023931953,"type":"stone"},{"x":9,"y":10,"theta":0,"type":"midStone"},{"x":9,"y":11,"theta":4.1887902047863905,"type":"tile"},{"x":9,"y":12,"theta":3.141592653589793,"type":"mountain"},{"x":10,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":10,"y":1,"theta":3.141592653589793,"type":"bushes"},{"x":10,"y":2,"theta":2.0943951023931953,"type":"ground"},{"x":10,"y":3,"theta":5.235987755982989,"type":"mountain"},{"x":10,"y":4,"theta":1.0471975511965976,"type":"ground"},{"x":10,"y":5,"theta":5.235987755982989,"type":"midStone"},{"x":10,"y":6,"theta":0,"type":"stone"},{"x":10,"y":7,"theta":5.235987755982989,"type":"midStone"},{"x":10,"y":8,"theta":4.1887902047863905,"type":"ground"},{"x":10,"y":9,"theta":0,"type":"trees"},{"x":10,"y":10,"theta":4.1887902047863905,"type":"trees"},{"x":10,"y":11,"theta":2.0943951023931953,"type":"midStone"},{"x":10,"y":12,"theta":2.0943951023931953,"type":"mountain"},{"x":11,"y":0,"theta":2.0943951023931953,"type":"mountain"},{"x":11,"y":1,"theta":5.235987755982989,"type":"grass"},{"x":11,"y":2,"theta":4.1887902047863905,"type":"tile"},{"x":11,"y":3,"theta":4.1887902047863905,"type":"ground"},{"x":11,"y":4,"theta":0,"type":"mountain"},{"x":11,"y":5,"theta":3.141592653589793,"type":"mountain"},{"x":11,"y":6,"theta":1.0471975511965976,"type":"trees"},{"x":11,"y":7,"theta":2.0943951023931953,"type":"stone"},{"x":11,"y":8,"theta":1.0471975511965976,"type":"stone"},{"x":11,"y":9,"theta":2.0943951023931953,"type":"tile"},{"x":11,"y":10,"theta":5.235987755982989,"type":"tile"},{"x":11,"y":11,"theta":3.141592653589793,"type":"bushes"},{"x":11,"y":12,"theta":4.1887902047863905,"type":"mountain"},{"x":12,"y":0,"theta":1.0471975511965976,"type":"mountain"},{"x":12,"y":1,"theta":2.0943951023931953,"type":"tile"},{"x":12,"y":2,"theta":2.0943951023931953,"type":"mountain"},{"x":12,"y":3,"theta":4.1887902047863905,"type":"trees"},{"x":12,"y":4,"theta":5.235987755982989,"type":"bushes"},{"x":12,"y":5,"theta":5.235987755982989,"type":"ground"},{"x":12,"y":6,"theta":4.1887902047863905,"type":"ground"},{"x":12,"y":7,"theta":5.235987755982989,"type":"tile"},{"x":12,"y":8,"theta":3.141592653589793,"type":"tile"},{"x":12,"y":9,"theta":4.1887902047863905,"type":"mountain"},{"x":12,"y":10,"theta":1.0471975511965976,"type":"stone"},{"x":12,"y":11,"theta":5.235987755982989,"type":"stone"},{"x":12,"y":12,"theta":4.1887902047863905,"type":"mountain"},{"x":13,"y":0,"theta":2.0943951023931953,"type":"mountain"},{"x":13,"y":1,"theta":5.235987755982989,"type":"ground"},{"x":13,"y":2,"theta":1.0471975511965976,"type":"mountain"},{"x":13,"y":3,"theta":0,"type":"grass"},{"x":13,"y":4,"theta":4.1887902047863905,"type":"mountain"},{"x":13,"y":5,"theta":2.0943951023931953,"type":"midStone"},{"x":13,"y":6,"theta":1.0471975511965976,"type":"mountain"},{"x":13,"y":7,"theta":2.0943951023931953,"type":"grass"},{"x":13,"y":8,"theta":3.141592653589793,"type":"grass"},{"x":13,"y":9,"theta":3.141592653589793,"type":"stone"},{"x":13,"y":10,"theta":5.235987755982989,"type":"stone"},{"x":13,"y":11,"theta":4.1887902047863905,"type":"midStone"},{"x":13,"y":12,"theta":4.1887902047863905,"type":"mountain"},{"x":14,"y":0,"theta":2.0943951023931953,"type":"mountain"},{"x":14,"y":1,"theta":1.0471975511965976,"type":"mountain"},{"x":14,"y":2,"theta":5.235987755982989,"type":"mountain"},{"x":14,"y":3,"theta":1.0471975511965976,"type":"mountain"},{"x":14,"y":4,"theta":4.1887902047863905,"type":"mountain"},{"x":14,"y":5,"theta":4.1887902047863905,"type":"mountain"},{"x":14,"y":6,"theta":4.1887902047863905,"type":"mountain"},{"x":14,"y":7,"theta":5.235987755982989,"type":"mountain"},{"x":14,"y":8,"theta":4.1887902047863905,"type":"mountain"},{"x":14,"y":9,"theta":0,"type":"mountain"},{"x":14,"y":10,"theta":2.0943951023931953,"type":"mountain"},{"x":14,"y":11,"theta":2.0943951023931953,"type":"mountain"},{"x":14,"y":12,"theta":0,"type":"mountain"}]}')},c550:function(t,e,n){t.exports=n.p+"26b139bccd31d549ed286575e5520626.glb"},c6e5:function(t,e,n){"use strict";n("5435")},e19c:function(t,e,n){t.exports=n.p+"ff09910a17edc7a5ef6477a082f1c0f7.glb"},e716:function(t,e,n){t.exports=n.p+"6dad82c5b70dfff6d47c12272dbe6fae.glb"},f4e8:function(t,e,n){t.exports=n.p+"f6d268703fac1dbbd6c367dfe69cd6f1.glb"}});
//# sourceMappingURL=app.2a7f94b5.js.map